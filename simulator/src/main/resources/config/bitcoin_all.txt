# ------------------------------------------------------------------------
#  Variables [time is measured in milliseconds]
# ------------------------------------------------------------------------

# time unit conversions
SECONDS                                 1000
MINUTES                                 SECONDS * 60
HOURS                                   MINUTES * 60
DAYS                                    HOURS * 24

# simulation parameters
END_TIME                                20 * MINUTES
LOG_STEP                                END_TIME / 10

# networking settings
NETWORK_MIN_DELAY                       DELAY
NETWORK_MAX_DELAY                       5 * DELAY

# simulate users of the public ledger that submit transactions to the system
TRANSACTIONS_POISSON_MEAN               SECONDS / 10

# Bitcoin specific parameters, see references
BITCOIN_INITIAL_PEERS                   25

# changing parameters
range.0 NETWORK_SIZE;100,550,1000
range.1 SEED;1:3
range.2 DELAY;50,100,500,1000,5000,10000


# ------------------------------------------------------------------------
#  Configuration
# ------------------------------------------------------------------------

# simulation specific
random.seed                             SEED
network.size                            NETWORK_SIZE
simulation.endtime                      END_TIME
simulation.logtime                      LOG


include.init                            wire transactions start_topology start_bitcoin

init.wire                               peersim.dynamics.WireKOut
init.wire.protocol                      topology
init.wire.k                             BITCOIN_INITIAL_PEERS

init.transactions                       simulator.bitcoin.core.initializers.TransactionsInitializer
init.transactions.protocol              bitcoin
init.transactions.mean                  TRANSACTIONS_POISSON_MEAN

init.start_topology                     simulator.initializers.ProtocolInitializer
init.start_topology.protocol            topology

init.start_bitcoin                      simulator.initializers.ProtocolInitializer
init.start_bitcoin.protocol             bitcoin


protocol.t1                             peersim.transport.UniformRandomTransport
protocol.t1.mindelay                    NETWORK_MIN_DELAY
protocol.t1.maxdelay                    NETWORK_MAX_DELAY

protocol.topology                       simulator.bitcoin.topology.BitcoinTopology
protocol.topology.transport             t1

protocol.bitcoin                        simulator.bitcoin.core.BitcoinCore
protocol.bitcoin.linkable               topology
protocol.bitcoin.transport              t1


control.topology-messages               simulator.bitcoin.topology.observers.MessagesObserver
control.topology-messages.protocol      topology
control.topology-messages.step          LOG_STEP

control.topology-removed                simulator.bitcoin.topology.observers.NodesRemovedObserver
control.topology-removed.protocol       topology
control.topology-removed.step           LOG_STEP

control.core-global-blockchain          simulator.bitcoin.core.observers.GlobalBlockchainObserver
control.core-global-blockchain.step     LOG_STEP

control.core-blockchain                 simulator.bitcoin.core.observers.BlockchainObserver
control.core-blockchain.protocol        bitcoin
control.core-blockchain.step            LOG_STEP

control.core-transactions               simulator.bitcoin.core.observers.TransactionsObserver
control.core-transactions.protocol      bitcoin
control.core-transactions.step          LOG_STEP
